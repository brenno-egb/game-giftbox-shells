<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Baú Giratório - Smartico Custom Game</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Andika:wght@400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./styles.css" />

  <script>
    // ✅ Ajuste para seu setup real
    const _saw_template_id = 690;
    const _label_key = 'a6e7ac26-c368-4892-9380-96e7ff82cf3e-4';
    const _brand_key = 'f86271e6';

    window._smartico_allow_localhost = true;
    window._smartico_user_id = 'test48054049';
    window._smartico_language = 'pt';
  </script>

  <script>
    (function (d, r, b, h, s) {
      h = d.getElementsByTagName('head')[0];
      s = d.createElement('script');
      s.onload = b;
      s.src = r;
      h.appendChild(s);
    })(document, 'https://libs.smartico.ai/smartico.js', function () {
      _smartico.init(_label_key, { brand_key: _brand_key });

      _smartico.on('init', () => {
        _smartico.suspendInbox(true);
        _smartico.suspendPopups(true);
        initializeGame(_saw_template_id);
      });
    });
  </script>
</head>

<body>
  <div class="app">
    <div class="top">
      <div class="title" id="game-title">Carregando…</div>
      <div class="subtitle" id="game-subtitle">Preparando o baú</div>
    </div>

    <div class="panel">
      <div class="hud">
        <div class="hud-left">
          <div class="hint" id="hint">Primeiro: aperte <b>Jogar</b>. Depois: abra o baú na roleta.</div>
          <div class="status" id="status">Pronto.</div>
        </div>

        <div class="hud-right">
          <div class="attempts">
            <div class="attempts-label" id="attempts-label">Tentativas</div>
            <div class="attempts-value" id="attempts-value">—</div>
          </div>

          <button class="btn ghost" id="rules-btn" type="button">Regras</button>
          <button class="btn ghost" id="reset-btn" type="button">Reset</button>
        </div>
      </div>

      <div class="stage">
        <!-- FASE 1: só baú -->
        <div class="scene" id="scene-intro">
          <div class="scene-card">
            <div class="scene-title">Um baú misterioso apareceu…</div>
            <div class="scene-sub">Clique em <b>Jogar</b> para revelar a roleta.</div>

            <div class="chest big" id="chest" aria-hidden="true">
              <div class="lid" id="lid"></div>
              <div class="base"></div>
              <div class="lock"></div>
            </div>

            <button class="btn big" id="play-btn" type="button">Jogar</button>
            <div class="small">O resultado final vem do Smartico.</div>
          </div>
        </div>

        <!-- FASE 2: carrossel -->
        <div class="scene is-hidden" id="scene-roll">
          <div class="roulette">
            <div class="roulette-header">
              <div class="roulette-title">Roleta do Baú</div>
              <div class="roulette-sub">A seta no meio indica onde vai parar.</div>
            </div>

            <div class="indicator"></div>
            <div class="viewport">
              <div class="track" id="track"></div>
            </div>

            <div class="controls">
              <button class="btn big" id="open-btn" type="button">Abrir Baú</button>
              <button class="btn ghost" id="back-btn" type="button">Voltar</button>
            </div>

            <div class="small">A roleta é visual — o prêmio é sorteado pelo Smartico.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Regras -->
  <div class="backdrop is-hidden" id="rules-backdrop">
    <div class="modal">
      <div class="modal-title">Regras</div>
      <div class="modal-body" id="rules-body"></div>
      <div class="modal-actions">
        <button class="btn" id="rules-close" type="button">Voltar</button>
      </div>
    </div>
  </div>

  <!-- Modal Prêmio -->
  <div class="backdrop is-hidden" id="win-backdrop">
    <div class="win">
      <div class="win-burst"></div>
      <div class="win-title" id="win-title">Resultado</div>

      <div class="win-row">
        <img id="win-icon" alt="" />
        <div class="win-text" id="win-text"></div>
      </div>

      <button class="btn" id="win-close" type="button">OK</button>
    </div>
  </div>

  <script src="./game.js"></script>
</body>
</html>
